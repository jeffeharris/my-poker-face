FROM ghcr.io/jeffeharris/my-poker-face/playwright-base:latest

# Set up working directory
WORKDIR /app

# Copy package files and install
COPY package.json package-lock.json ./
RUN npm ci

# Copy the rest of the app
COPY . .

# Expose Vite dev server port
EXPOSE 5173

# Run Playwright tests (Vite dev server auto-starts via webServer config)
# Default: run all projects (Mobile Chrome + Mobile Safari)
CMD ["npx", "playwright", "test", "--reporter=list"]
