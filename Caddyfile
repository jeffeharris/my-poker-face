mypokerfacegame.com, www.mypokerfacegame.com {
    # API routes
    handle /api/* {
        reverse_proxy backend:5000
    }

    # Socket.IO (WebSocket + long-polling)
    handle /socket.io/* {
        reverse_proxy backend:5000 {
            flush_interval -1
        }
    }

    # Health check
    handle /health {
        reverse_proxy backend:5000
    }

    # Admin API routes
    handle /admin/* {
        reverse_proxy backend:5000
    }

    # Service worker - never cache (ensures PWA updates propagate)
    handle /sw.js {
        header Cache-Control "no-cache, no-store, must-revalidate"
        reverse_proxy frontend:80
    }

    # Frontend (React static files)
    handle {
        reverse_proxy frontend:80
    }
}
